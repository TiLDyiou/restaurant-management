<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:RestaurantManagementGUI.Models"
             x:Class="RestaurantManagementGUI.FlyoutMenuView"
             x:Name="FlyoutMenu">

    <!-- Overlay + Flyout Container -->
    <Grid x:Name="FlyoutContainer" 
          IsVisible="False"
          InputTransparent="True">

        <Grid.Resources>
            <Color x:Key="ColorDarkBrown">#503106</Color>
            <Color x:Key="ColorLightTan">#fff8ed</Color>
            <Color x:Key="ColorYellowGold">#ffbd59</Color>
            <Color x:Key="ColorDarkGray">#263238</Color>
            <Color x:Key="ColorWhite">#FFFFFF</Color>
            <Color x:Key="ColorLightGray">#F5F5F5</Color>

            <!-- Style cho Action Button -->
            <Style TargetType="Border" x:Key="ActionButtonStyle">
                <Setter Property="BackgroundColor" Value="{StaticResource ColorLightTan}" />
                <Setter Property="StrokeShape" Value="RoundRectangle 16" />
                <Setter Property="StrokeThickness" Value="0" />
                <Setter Property="Padding" Value="16,16" />
                <Setter Property="Margin" Value="0,6" />
                <Setter Property="Shadow">
                    <Setter.Value>
                        <Shadow Brush="#15000000" Offset="0,2" Radius="8" Opacity="0.5" />
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Style cho Icon Label (Material Icons) -->
            <Style TargetType="Label" x:Key="IconStyle">
                <Setter Property="FontFamily" Value="MaterialIcons" />
                <Setter Property="FontSize" Value="24" />
                <Setter Property="VerticalOptions" Value="Center" />
                <Setter Property="TextColor" Value="{StaticResource ColorDarkBrown}" />
            </Style>

            <!-- Style cho Text Button -->
            <Style TargetType="Label" x:Key="ButtonTextStyle">
                <Setter Property="FontFamily" Value="RobotoMono" />
                <Setter Property="FontSize" Value="15" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="VerticalOptions" Value="Center" />
                <Setter Property="TextColor" Value="{StaticResource ColorDarkBrown}" />
            </Style>
        </Grid.Resources>

        <!-- Overlay (MÃ n má» phÃ­a sau) -->
        <BoxView BackgroundColor="#80000000"
                 Opacity="0"
                 x:Name="Overlay"
                 Margin="0,-50,0,0">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnOverlayTapped" />
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- Flyout Panel -->
        <Border x:Name="FlyoutPanel"
                BackgroundColor="{StaticResource ColorYellowGold}"
                StrokeThickness="0"
                WidthRequest="320"
                HorizontalOptions="Start"
                VerticalOptions="Fill"
                TranslationX="-320"
                Margin="0,-50,0,0">


            <ScrollView>
                <VerticalStackLayout Padding="20,40,20,20" Spacing="20">

                    <!-- HEADER: ThÃ´ng tin bÃ n Ä‘ang chá»n -->
                    <Border BackgroundColor="{StaticResource ColorDarkBrown}"
                            StrokeShape="RoundRectangle 20"
                            Padding="18"
                            StrokeThickness="0"
                            x:Name="SelectedTableInfo"
                            IsVisible="False">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="ðŸ“ BÃ€N ÄANG CHá»ŒN"
                                   FontFamily="RobotoMono"
                                   FontSize="12"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource ColorYellowGold}"
                                   Opacity="0.8" />

                            <HorizontalStackLayout Spacing="10">
                                <Label Text="&#xe8d7;"
                                       FontFamily="MaterialIcons"
                                       FontSize="32"
                                       TextColor="{StaticResource ColorLightTan}"
                                       VerticalOptions="Center" />
                                <VerticalStackLayout Spacing="2">
                                    <Label x:Name="SelectedTableName"
                                           Text="BÃ n 5"
                                           FontFamily="RobotoMono"
                                           FontSize="20"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource ColorLightTan}" />
                                    <Label x:Name="SelectedTableStatus"
                                           Text="ðŸŸ¡ BÃ n Ä‘Ã£ Ä‘áº·t"
                                           FontFamily="RobotoMono"
                                           FontSize="13"
                                           TextColor="{StaticResource ColorLightTan}"
                                           Opacity="0.9" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Border>

                    <!-- SECTION: HÃ nh Ä‘á»™ng nhanh -->
                    <VerticalStackLayout Spacing="4" x:Name="QuickActionsSection" IsVisible="False">
                        

                        <!-- Button: Äá»•i tráº¡ng thÃ¡i -->
                        <Border Style="{StaticResource ActionButtonStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnChangeStatusTapped" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="14">
                                <Label Text="&#xe863;" Style="{StaticResource IconStyle}" />
                                <Label Text="Äá»•i tráº¡ng thÃ¡i" Style="{StaticResource ButtonTextStyle}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Button: Xem/ThÃªm mÃ³n -->
                        <Border Style="{StaticResource ActionButtonStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnViewAddOrderTapped" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="14">
                                <Label Text="&#xf1f2;" Style="{StaticResource IconStyle}" />
                                <Label Text="Xem/ThÃªm mÃ³n" Style="{StaticResource ButtonTextStyle}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Button: Thanh toÃ¡n -->
                        <Border Style="{StaticResource ActionButtonStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnPaymentTapped" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="14">
                                <Label Text="&#xe8a1;" Style="{StaticResource IconStyle}" />
                                <Label Text="Thanh toÃ¡n" Style="{StaticResource ButtonTextStyle}" />
                            </HorizontalStackLayout>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Divider -->
                    <BoxView HeightRequest="1"
                             BackgroundColor="{StaticResource ColorDarkBrown}"
                             Opacity="0.2"
                             Margin="0,10" />

                    <!-- SECTION: Thá»‘ng kÃª nhanh -->
                    <Border BackgroundColor="{StaticResource ColorLightTan}"
                            StrokeShape="RoundRectangle 16"
                            Padding="16"
                            StrokeThickness="0">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="THá»NG KÃŠ NHANH"
                                   FontFamily="RobotoMono"
                                   FontSize="12"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource ColorDarkBrown}"
                                   Opacity="0.7" />

                            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" ColumnSpacing="12" RowSpacing="8">
                                <!-- Tá»•ng bÃ n -->
                                <HorizontalStackLayout Grid.Column="0" Grid.Row="0" Spacing="6">
                                    <Label Text="Tá»•ng:"
                                           FontFamily="RobotoMono"
                                           FontSize="14"
                                           TextColor="{StaticResource ColorDarkGray}" />
                                    <Label x:Name="TotalTablesLabel"
                                           Text="10"
                                           FontFamily="RobotoMono"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource ColorDarkBrown}" />
                                </HorizontalStackLayout>

                                <!-- BÃ n trá»‘ng -->
                                <HorizontalStackLayout Grid.Column="1" Grid.Row="0" Spacing="6">
                                    <Label Text="Trá»‘ng:"
                                           FontFamily="RobotoMono"
                                           FontSize="14"
                                           TextColor="{StaticResource ColorDarkGray}" />
                                    <Label x:Name="EmptyTablesLabel"
                                           Text="3"
                                           FontFamily="RobotoMono"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           TextColor="#4CAF50" />
                                </HorizontalStackLayout>

                                <!-- BÃ n báº­n -->
                                <HorizontalStackLayout Grid.Column="0" Grid.Row="1" Spacing="6">
                                    <Label Text="Báº­n:"
                                           FontFamily="RobotoMono"
                                           FontSize="14"
                                           TextColor="{StaticResource ColorDarkGray}" />
                                    <Label x:Name="OccupiedTablesLabel"
                                           Text="5"
                                           FontFamily="RobotoMono"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           TextColor="#D32F2F" />
                                </HorizontalStackLayout>

                                <!-- BÃ n Ä‘Ã£ Ä‘áº·t -->
                                <HorizontalStackLayout Grid.Column="1" Grid.Row="1" Spacing="6">
                                    <Label Text="ÄÃ£ Ä‘áº·t:"
                                           FontFamily="RobotoMono"
                                           FontSize="14"
                                           TextColor="{StaticResource ColorDarkGray}" />
                                    <Label x:Name="ReservedTablesLabel"
                                           Text="2"
                                           FontFamily="RobotoMono"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           TextColor="#FF9800" />
                                </HorizontalStackLayout>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!-- SECTION: Lá»c theo tráº¡ng thÃ¡i -->
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Lá»ŒC THEO TRáº NG THÃI"
                               FontFamily="RobotoMono"
                               FontSize="12"
                               FontAttributes="Bold"
                               TextColor="{StaticResource ColorDarkBrown}"
                               Opacity="0.7" />

                        <Picker x:Name="StatusFilterPicker"
                                BackgroundColor="{StaticResource ColorLightTan}"
                                TextColor="{StaticResource ColorDarkBrown}"
                                FontFamily="RobotoMono"
                                FontAttributes="Bold"
                                SelectedIndexChanged="OnStatusFilterChanged">
                            <Picker.Items>
                                <x:String>Táº¥t cáº£ bÃ n</x:String>
                                <x:String>BÃ n trá»‘ng</x:String>
                                <x:String>BÃ n báº­n</x:String>
                                <x:String>BÃ n Ä‘Ã£ Ä‘áº·t</x:String>
                            </Picker.Items>
                        </Picker>
                    </VerticalStackLayout>

                    

                </VerticalStackLayout>
            </ScrollView>
        </Border>

    </Grid>
</ContentView>