<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:MenuNhaHang"
    xmlns:model="clr-namespace:MenuNhaHang.Models"
    x:Class="MenuNhaHang.MainPage"
    BackgroundColor="{StaticResource BackgroundColor}"
    Title="Thực đơn nhà hàng">

    <Grid RowDefinitions="Auto,Auto,*,Auto" Padding="20">

        <Label x:Name="lblTenBan"
               Grid.Row="0"
               Text="Đang chọn bàn..."
               FontSize="20"
               FontAttributes="Bold"
               TextColor="{StaticResource TextDark}"
               HorizontalOptions="Center"
               Margin="0,0,0,10" />
        <SearchBar x:Name="txtTimKiem"
                   Grid.Row="0"
                   Placeholder="Tìm kiếm món ăn..."
                   TextChanged="TimKiem_TextChanged"
                   Margin="0,0,0,10" />

        <Border Grid.Row="1" StrokeShape="RoundRectangle 25" BackgroundColor="White" Padding="10" Margin="0,10,0,15">
            <HorizontalStackLayout x:Name="ThanhPhanLoai" Spacing="15" HorizontalOptions="Center">
                <Button x:Name="btnTatCa" Text="Tất cả" Clicked="TatCa_Clicked" BackgroundColor="#B71C1C" TextColor="White"/>
                <Button x:Name="btnMonChinh" Text="Món chính" Clicked="MonChinh_Clicked" BackgroundColor="#E0E0E0" TextColor="#3E2723"/>
                <Button x:Name="btnDoUong" Text="Đồ uống" Clicked="DoUong_Clicked" BackgroundColor="#E0E0E0" TextColor="#3E2723"/>
                <Button x:Name="btnTrangMieng" Text="Tráng miệng" Clicked="TrangMieng_Clicked" BackgroundColor="#E0E0E0" TextColor="#3E2723"/>
                <Button x:Name="btnCombo" Text="Combo" Clicked="Combo_Clicked" BackgroundColor="#E0E0E0" TextColor="#3E2723"/>
            </HorizontalStackLayout>
        </Border>

        <CollectionView x:Name="DanhSachMon" Grid.Row="2" Margin="0,10,0,10" SelectionMode="None">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="model:MonAn">
                    <Border StrokeShape="RoundRectangle 20" BackgroundColor="{StaticResource CardColor}" Margin="10" Padding="15">
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Border StrokeShape="RoundRectangle 15">
                                <Image Source="{Binding Hinh}" WidthRequest="90" HeightRequest="90" Aspect="AspectFill"/>
                            </Border>
                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                                <Label Text="{Binding Ten}" FontAttributes="Bold" FontSize="20" TextColor="{StaticResource TextDark}"/>
                                <Label Text="{Binding Gia, StringFormat='{0:N0} đ'}" FontSize="16" TextColor="#795548"/>
                            </VerticalStackLayout>
                            <Button Grid.Column="2" Text="+ Thêm" FontSize="14" WidthRequest="80" HeightRequest="45" 
                                    BackgroundColor="{StaticResource PrimaryColor}" TextColor="White"
                                    CommandParameter="{Binding .}" Clicked="ThemMon_Clicked"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Border Grid.Row="3" StrokeShape="RoundRectangle 20" BackgroundColor="White" Padding="15" Margin="0,10,0,0">
            <Grid ColumnDefinitions="*,Auto">
                <Label x:Name="lblTongSoMon" Text="Chưa có món nào" FontAttributes="Bold" FontSize="18" TextColor="#3E2723" VerticalOptions="Center"/>
                <Button Text="Xem đơn hàng" Grid.Column="1" Clicked="XemDon_Clicked" TextColor="White" FontSize="16" Padding="25,10">
                    <Button.Background>
                        <LinearGradientBrush EndPoint="1,0">
                            <GradientStop Color="{StaticResource AccentColor}" Offset="0.0" />
                            <GradientStop Color="{StaticResource PrimaryColor}" Offset="1.0" />
                        </LinearGradientBrush>
                    </Button.Background>
                </Button>
            </Grid>
        </Border>
    </Grid>
</ContentPage>